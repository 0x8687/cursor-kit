# Debug Report: Annotation Initializer Extra Arguments

**Date**: 2025-12-05  
**Issue**: Extra arguments at positions #5, #6 in call  
**File**: `EditorViewModel.swift` line 276  
**Severity**: Compilation Error  
**Status**: Root Cause Identified

## Executive Summary

`Annotation` initializer called with `startPoint` and `endPoint` parameters that don't exist in the initializer signature. These are optional stored properties, not initializer parameters.

**Root Cause**: Attempting to set optional properties (`startPoint`, `endPoint`) in initializer call instead of after initialization.

**Impact**: Code won't compile.

**Solution**: Remove `startPoint` and `endPoint` from initializer call, set them as properties after initialization.

## Technical Analysis

### Problem Location

**File**: `ScreenshotApp/ViewModels/EditorViewModel.swift`  
**Line**: 276-283  
**Function**: `createAnnotation(type:frame:)`

### Problematic Code

```swift
var annotation = Annotation(
    type: type,
    frame: frame,
    color: annotationColor,
    strokeWidth: strokeWidth,
    startPoint: CGPoint(x: frame.minX, y: frame.minY),  // ❌ Not in initializer
    endPoint: CGPoint(x: frame.maxX, y: frame.maxY)     // ❌ Not in initializer
)
```

### Annotation Initializer Signature

From `Annotation.swift`:
```swift
init(
    id: UUID = UUID(),
    type: AnnotationType,
    frame: CGRect,
    color: Color = .blue,
    strokeWidth: CGFloat = 2.0
)
```

**Available Parameters**: `id`, `type`, `frame`, `color`, `strokeWidth`  
**Not Available**: `startPoint`, `endPoint` (these are optional stored properties)

### Root Cause

The `startPoint` and `endPoint` are optional stored properties in the `Annotation` struct, not initializer parameters. They should be set after initialization.

## Solution

Set `startPoint` and `endPoint` as properties after initialization:

```swift
var annotation = Annotation(
    type: type,
    frame: frame,
    color: annotationColor,
    strokeWidth: strokeWidth
)

annotation.startPoint = CGPoint(x: frame.minX, y: frame.minY)
annotation.endPoint = CGPoint(x: frame.maxX, y: frame.maxY)
```

## Implementation

Change lines 276-283 from:
```swift
var annotation = Annotation(
    type: type,
    frame: frame,
    color: annotationColor,
    strokeWidth: strokeWidth,
    startPoint: CGPoint(x: frame.minX, y: frame.minY),
    endPoint: CGPoint(x: frame.maxX, y: frame.maxY)
)
```

To:
```swift
var annotation = Annotation(
    type: type,
    frame: frame,
    color: annotationColor,
    strokeWidth: strokeWidth
)

annotation.startPoint = CGPoint(x: frame.minX, y: frame.minY)
annotation.endPoint = CGPoint(x: frame.maxX, y: frame.maxY)
```

## Testing

After fix:
- [ ] Code compiles without errors
- [ ] Annotations are created correctly
- [ ] startPoint and endPoint are set properly
- [ ] Arrow and line annotations work correctly

## Additional Notes

- Optional stored properties cannot be set in initializer unless they're part of the initializer signature
- Properties can be set after initialization since `annotation` is declared as `var`
- This pattern is common in Swift when you have many optional properties

---

**Report Generated By**: Debugger Agent  
**Date**: 2025-12-05

